version: api.keploy.io/v1beta1
kind: SQL
name: test-24-0
spec:
    metadata:
        name: SQL
        operation: PrepareContext
        query: '"SELECT * FROM subscribers WHERE CASE WHEN $1 > 0 THEN id = $1 WHEN $2 != '''' THEN uuid = $2::UUID WHEN $3 != '''' THEN email = $3 END;"'
        type: SQL_DB
    type: error
    int: 0
    error:
        - nil
---
version: api.keploy.io/v1beta1
kind: SQL
name: test-24-1
spec:
    metadata:
        name: SQL
        operation: PrepareContext.NumInput
        type: SQL_DB
    type: int
    int: 3
    error: []
---
version: api.keploy.io/v1beta1
kind: SQL
name: test-24-2
spec:
    metadata:
        arguments: '[{ 1 1} { 2 <nil>} { 3 }]'
        name: SQL
        operation: QueryContext
        type: SQL_DB
    type: error
    int: 0
    error:
        - nil
---
version: api.keploy.io/v1beta1
kind: SQL
name: test-24-3
spec:
    metadata:
        name: SQL
        operation: QueryContext.Close
        type: SQL_DB
    type: table
    table:
        cols:
            - name: id
              type: <nil>
              precision: 0
              scale: 0
            - name: uuid
              type: <nil>
              precision: 0
              scale: 0
            - name: email
              type: <nil>
              precision: 0
              scale: 0
            - name: name
              type: <nil>
              precision: 0
              scale: 0
            - name: attribs
              type: <nil>
              precision: 0
              scale: 0
            - name: status
              type: <nil>
              precision: 0
              scale: 0
            - name: created_at
              type: <nil>
              precision: 0
              scale: 0
            - name: updated_at
              type: <nil>
              precision: 0
              scale: 0
        rows:
            - '[`<nil>` | `<nil>` | `<nil>` | `<nil>` | `<nil>` | `<nil>` | `<nil>` | `<nil>` | ]'
    int: 0
    error:
        - EOF
        - nil
---
version: api.keploy.io/v1beta1
kind: SQL
name: test-24-4
spec:
    metadata:
        name: SQL
        operation: PrepareContext.Close
        type: SQL_DB
    type: error
    int: 0
    error:
        - nil
