version: api.keploy.io/v1beta1
kind: SQL
name: test-15-0
spec:
    metadata:
        arguments: '[{ 1 0} { 2 0} { 3 0} { 4 } { 5 0} { 6 50}]'
        name: SQL
        operation: QueryContext
        query: '"SELECT COUNT(*) OVER () AS total, bounces.id, bounces.type, bounces.source, bounces.meta, bounces.created_at, bounces.subscriber_id, subscribers.uuid AS subscriber_uuid, subscribers.email AS email, subscribers.email AS email, ( CASE WHEN bounces.campaign_id IS NOT NULL THEN JSON_BUILD_OBJECT(''id'', bounces.campaign_id, ''name'', campaigns.name) ELSE NULL END ) AS campaign FROM bounces LEFT JOIN subscribers ON (subscribers.id = bounces.subscriber_id) LEFT JOIN campaigns ON (campaigns.id = bounces.campaign_id) WHERE ($1 = 0 OR bounces.id = $1) AND ($2 = 0 OR bounces.campaign_id = $2) AND ($3 = 0 OR bounces.subscriber_id = $3) AND ($4 = '''' OR bounces.source = $4) ORDER BY created_at desc OFFSET $5 LIMIT $6;"'
        type: SQL_DB
    type: error
    int: 0
    error:
        - nil
---
version: api.keploy.io/v1beta1
kind: SQL
name: test-15-1
spec:
    metadata:
        name: SQL
        operation: QueryContext.Close
        type: SQL_DB
    type: table
    table:
        cols:
            - name: total
              type: <nil>
              precision: 0
              scale: 0
            - name: id
              type: <nil>
              precision: 0
              scale: 0
            - name: type
              type: <nil>
              precision: 0
              scale: 0
            - name: source
              type: <nil>
              precision: 0
              scale: 0
            - name: meta
              type: <nil>
              precision: 0
              scale: 0
            - name: created_at
              type: <nil>
              precision: 0
              scale: 0
            - name: subscriber_id
              type: <nil>
              precision: 0
              scale: 0
            - name: subscriber_uuid
              type: <nil>
              precision: 0
              scale: 0
            - name: email
              type: <nil>
              precision: 0
              scale: 0
            - name: email
              type: <nil>
              precision: 0
              scale: 0
            - name: campaign
              type: <nil>
              precision: 0
              scale: 0
        rows:
            - '[`<nil>` | `<nil>` | `<nil>` | `<nil>` | `<nil>` | `<nil>` | `<nil>` | `<nil>` | `<nil>` | `<nil>` | `<nil>` | ]'
    int: 0
    error:
        - EOF
        - nil
